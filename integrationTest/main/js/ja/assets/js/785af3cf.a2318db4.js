"use strict";(globalThis.webpackChunkcompose_preview_lab_docs=globalThis.webpackChunkcompose_preview_lab_docs||[]).push([[1794],{8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>l});var i=n(6540);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}},8493:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"guides/auto-testing/basic-setup","title":"\u57fa\u672c\u69cb\u6210","description":"\u3053\u306e\u30da\u30fc\u30b8\u306f\u751f\u6210 AI \u306b\u3088\u3063\u3066\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30da\u30fc\u30b8\u3067\u3059\u3002","source":"@site/docs/04-guides/08-auto-testing/01-basic-setup.md","sourceDirName":"04-guides/08-auto-testing","slug":"/guides/auto-testing/basic-setup","permalink":"/compose-preview-lab/ja/docs/guides/auto-testing/basic-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/TBSten/compose-preview-lab/tree/main/integrationTest/web/docs/04-guides/08-auto-testing/01-basic-setup.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"\u57fa\u672c\u69cb\u6210","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/compose-preview-lab/ja/docs/guides/auto-testing/"},"next":{"title":"\u30a4\u30d9\u30f3\u30c8\u3092\u4f34\u3046 UI \u306e\u30c6\u30b9\u30c8","permalink":"/compose-preview-lab/ja/docs/guides/auto-testing/event-testing"}}');var s=n(4848),o=n(8453);const r={title:"\u57fa\u672c\u69cb\u6210",sidebar_position:1},l="\u81ea\u52d5\u30c6\u30b9\u30c8\u306e\u57fa\u672c\u69cb\u6210",a={},c=[{value:"TestPreviewLab \u306e\u5f79\u5272",id:"testpreviewlab-\u306e\u5f79\u5272",level:2}];function d(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsx)(t.p,{children:"\u3053\u306e\u30da\u30fc\u30b8\u306f\u751f\u6210 AI \u306b\u3088\u3063\u3066\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30da\u30fc\u30b8\u3067\u3059\u3002"})}),"\n",(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"\u81ea\u52d5\u30c6\u30b9\u30c8\u306e\u57fa\u672c\u69cb\u6210",children:"\u81ea\u52d5\u30c6\u30b9\u30c8\u306e\u57fa\u672c\u69cb\u6210"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"dev"})," \u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u306f\u3001PreviewLab \u3092\u4f7f\u3063\u305f UI \u30c6\u30b9\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-kt",metastring:'title="PreviewsForUiDebugTest.kt \u629c\u7c8b"',children:'@OptIn(ExperimentalTestApi::class)\nclass PreviewsForUiDebugTest {\n\n    @Test\n    fun `IntField should update preview when value changes`() = runDesktopComposeUiTest {\n        val state = PreviewLabState()\n        setContent { TestPreviewLab(state) { PreviewsForUiDebug.Fields.content() } }\n\n        // 1. Field \u3092\u53d6\u5f97\u3057\u3066\u5024\u3092\u5909\u66f4\n        val intField = state.field<Int>("intValue")\n        intField.value = 42\n\n        awaitIdle()\n\n        // 2. \u753b\u9762\u4e0a\u306b\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u691c\u8a3c\n        onNodeWithText("intValue: 42")\n            .assertIsDisplayed()\n    }\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"\u30dd\u30a4\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\uff1a"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"PreviewLabState"})," \u3092\u30c6\u30b9\u30c8\u7528\u306b\u751f\u6210\u3059\u308b"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"TestPreviewLab(state) { ... }"})," \u3067 Preview \u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30e9\u30c3\u30d7\u3059\u308b"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:'state.field<T>("label")'})," \u3067 Field \u306e\u5024\u3092\u66f8\u304d\u63db\u3048\u308b"]}),"\n",(0,s.jsxs)(t.li,{children:["Compose UI \u30c6\u30b9\u30c8 API (",(0,s.jsx)(t.code,{children:"onNodeWithText"}),", ",(0,s.jsx)(t.code,{children:"performClick"})," \u306a\u3069) \u3067\u753b\u9762\u306e\u72b6\u614b\u3092\u691c\u8a3c\u3059\u308b"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"testpreviewlab-\u306e\u5f79\u5272",children:"TestPreviewLab \u306e\u5f79\u5272"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-kt",metastring:'title="TestPreviewLab.kt \u629c\u7c8b"',children:"@Composable\nfun TestPreviewLab(\n    state: PreviewLabState,\n    viewModelStoreOwner: ViewModelStoreOwner = defaultTestViewModelStoreOwner(),\n    lifecycleOwner: LifecycleOwner = defaultTestLifecycleOwner(),\n    block: @Composable () -> Unit,\n) {\n    CompositionLocalProvider(\n        LocalViewModelStoreOwner provides viewModelStoreOwner,\n        LocalLifecycleOwner provides lifecycleOwner,\n        LocalPreviewLabState provides state,\n    ) {\n        block()\n    }\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["\u30c6\u30b9\u30c8\u74b0\u5883\u3067\u3082 PreviewLab \u304c\u5fc5\u8981\u3068\u3059\u308b CompositionLocal\uff08",(0,s.jsx)(t.code,{children:"PreviewLabState"}),", ",(0,s.jsx)(t.code,{children:"LifecycleOwner"}),", ",(0,s.jsx)(t.code,{children:"ViewModelStoreOwner"}),"\uff09\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u304f\u308c\u308b\u30d8\u30eb\u30d1\u30fc\u3067\u3059\u3002"]}),"\n",(0,s.jsx)(t.admonition,{title:"\u6700\u5c0f\u69cb\u6210\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u304f",type:"tip",children:(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"PreviewLabState()"})," \u3092\u751f\u6210"]}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"setContent { TestPreviewLab(state) { MyPreviewContent() } }"})}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:'state.field<T>("label")'})," \u3067 Field \u3092\u64cd\u4f5c"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"onNodeWithText(...).assertIsDisplayed()"})," \u306a\u3069\u3067\u691c\u8a3c"]}),"\n"]})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);