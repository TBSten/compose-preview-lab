"use strict";(globalThis.webpackChunkcompose_preview_lab_docs=globalThis.webpackChunkcompose_preview_lab_docs||[]).push([[7572],{7910:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>d,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"guides/auto-testing/property-based-testing","title":"Property-based testing","description":"PreviewLab \u306f Property-based testing \u3068\u306e\u76f8\u6027\u304c\u826f\u304f\u3001Field \u306e testValues() API \u3092\u4f7f\u3063\u3066\u52b9\u7387\u7684\u306b\u30c6\u30b9\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002","source":"@site/docs/04-guides/08-auto-testing/04-property-based-testing.md","sourceDirName":"04-guides/08-auto-testing","slug":"/guides/auto-testing/property-based-testing","permalink":"/compose-preview-lab/docs/guides/auto-testing/property-based-testing","draft":false,"unlisted":false,"editUrl":"https://github.com/TBSten/compose-preview-lab/tree/main/integrationTest/web/docs/04-guides/08-auto-testing/04-property-based-testing.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Property-based testing","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u81ea\u52d5\u751f\u6210\uff08\u69cb\u60f3\uff09","permalink":"/compose-preview-lab/docs/guides/auto-testing/test-code-generation"},"next":{"title":"VRT (Visual Regression Testing)\uff08\u69cb\u60f3\uff09","permalink":"/compose-preview-lab/docs/guides/auto-testing/vrt"}}');var n=s(4848),i=s(8453);const d={title:"Property-based testing",sidebar_position:4},r="Property-based testing",a={},o=[{value:"testValues() API",id:"testvalues-api",level:2},{value:"\u5404 Field \u306e testValues() \u306e\u6319\u52d5",id:"\u5404-field-\u306e-testvalues-\u306e\u6319\u52d5",level:3},{value:"kotest-property \u3068\u306e\u9023\u643a",id:"kotest-property-\u3068\u306e\u9023\u643a",level:2},{value:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9",id:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9",level:3},{value:"\u69d8\u3005\u306a Field \u306e\u30c6\u30b9\u30c8\u4f8b",id:"\u69d8\u3005\u306a-field-\u306e\u30c6\u30b9\u30c8\u4f8b",level:3},{value:"BooleanField",id:"booleanfield",level:4},{value:"SelectableField / EnumField",id:"selectablefield--enumfield",level:4},{value:"NullableField",id:"nullablefield",level:4},{value:"\u30ab\u30b9\u30bf\u30e0 testValues \u306e\u8ffd\u52a0",id:"\u30ab\u30b9\u30bf\u30e0-testvalues-\u306e\u8ffd\u52a0",level:2},{value:"\u4f9d\u5b58\u95a2\u4fc2",id:"\u4f9d\u5b58\u95a2\u4fc2",level:2},{value:"\u95a2\u9023\u30ea\u30f3\u30af",id:"\u95a2\u9023\u30ea\u30f3\u30af",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"property-based-testing",children:"Property-based testing"})}),"\n",(0,n.jsxs)(t.p,{children:["PreviewLab \u306f Property-based testing \u3068\u306e\u76f8\u6027\u304c\u826f\u304f\u3001Field \u306e ",(0,n.jsx)(t.code,{children:"testValues()"})," API \u3092\u4f7f\u3063\u3066\u52b9\u7387\u7684\u306b\u30c6\u30b9\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,n.jsx)(t.h2,{id:"testvalues-api",children:"testValues() API"}),"\n",(0,n.jsxs)(t.p,{children:["\u5404 Field \u306f ",(0,n.jsx)(t.code,{children:"testValues()"})," \u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u3066\u304a\u308a\u3001\u30c6\u30b9\u30c8\u306b\u6709\u7528\u306a\u5024\u306e\u30ea\u30b9\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-kotlin",children:"interface PreviewLabField<Value> {\n    // ...\n    fun testValues(): List<Value>\n}\n"})}),"\n",(0,n.jsx)(t.h3,{id:"\u5404-field-\u306e-testvalues-\u306e\u6319\u52d5",children:"\u5404 Field \u306e testValues() \u306e\u6319\u52d5"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Field"}),(0,n.jsx)(t.th,{children:"testValues() \u306e\u5185\u5bb9"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:"IntField"}),", ",(0,n.jsx)(t.code,{children:"FloatField"}),", ",(0,n.jsx)(t.code,{children:"StringField"})," \u306a\u3069"]}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"[initialValue]"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"BooleanField"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"[true, false]"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"SelectableField"})}),(0,n.jsx)(t.td,{children:"\u9078\u629e\u53ef\u80fd\u306a\u3059\u3079\u3066\u306e\u30aa\u30d7\u30b7\u30e7\u30f3"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"EnumField"})}),(0,n.jsx)(t.td,{children:"\u3059\u3079\u3066\u306e enum \u5024"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"NullableField"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"baseField.testValues() + [null]"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"WithHintField"})}),(0,n.jsx)(t.td,{children:"hints \u306b\u6307\u5b9a\u3055\u308c\u305f\u5024"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"CombinedField"})}),(0,n.jsx)(t.td,{children:"\u30b5\u30d6\u30d5\u30a3\u30fc\u30eb\u30c9\u306e testValues() \u306e\u76f4\u7a4d"})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"kotest-property-\u3068\u306e\u9023\u643a",children:"kotest-property \u3068\u306e\u9023\u643a"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://kotest.io/docs/proptest/property-based-testing.html",children:"kotest-property"})," \u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3001\u30e9\u30f3\u30c0\u30e0\u306a\u5024\u3068 ",(0,n.jsx)(t.code,{children:"testValues()"})," \u306e\u30a8\u30c3\u30b8\u30b1\u30fc\u30b9\u3092\u4e21\u65b9\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,n.jsx)(t.h3,{id:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9",children:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-kotlin",children:'import io.kotest.property.Arb\nimport io.kotest.property.arbitrary.int\nimport io.kotest.property.arbitrary.plusEdgecases\nimport io.kotest.property.forAll\n\n@Test\nfun `IntField should update preview when value changes`() = runDesktopComposeUiTest {\n    val state = PreviewLabState()\n    setContent { TestPreviewLab(state) { MyPreview() } }\n\n    val countField = state.field<Int>("Count")\n\n    // \u30e9\u30f3\u30c0\u30e0\u306a int \u5024 + testValues() \u306e\u30a8\u30c3\u30b8\u30b1\u30fc\u30b9\u3092\u30c6\u30b9\u30c8\n    forAll(Arb.int().plusEdgecases(countField.testValues())) { intValue ->\n        countField.value = intValue\n        awaitIdle()\n\n        onNodeWithText("Count: $intValue")\n            .assertExists()\n        true\n    }\n}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"\u69d8\u3005\u306a-field-\u306e\u30c6\u30b9\u30c8\u4f8b",children:"\u69d8\u3005\u306a Field \u306e\u30c6\u30b9\u30c8\u4f8b"}),"\n",(0,n.jsx)(t.h4,{id:"booleanfield",children:"BooleanField"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-kotlin",children:'val enabledField = state.field<Boolean>("Enabled")\n\nforAll(Arb.boolean().plusEdgecases(enabledField.testValues())) { boolValue ->\n    enabledField.value = boolValue\n    awaitIdle()\n    true\n}\n'})}),"\n",(0,n.jsx)(t.h4,{id:"selectablefield--enumfield",children:"SelectableField / EnumField"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-kotlin",children:'val themeField = state.field<Theme>("Theme")\n\n// testValues() \u306b\u306f\u3059\u3079\u3066\u306e\u9078\u629e\u80a2\u304c\u542b\u307e\u308c\u308b\nforAll(Arb.of(themeField.testValues()).plusEdgecases(themeField.testValues())) { theme ->\n    themeField.value = theme\n    awaitIdle()\n    onNodeWithText("current theme: $theme").isDisplayed()\n}\n'})}),"\n",(0,n.jsx)(t.h4,{id:"nullablefield",children:"NullableField"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-kotlin",children:'val userNameField = state.field<String?>("User Name")\n\nforAll(Arb.string(1..20).orNull().plusEdgecases(userNameField.testValues())) { userName ->\n    userNameField.value = userName\n    awaitIdle()\n\n    val expectedText = userName ?: "No user name"\n    onAllNodesWithText(expectedText)\n        .fetchSemanticsNodes()\n        .isNotEmpty()\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"\u30ab\u30b9\u30bf\u30e0-testvalues-\u306e\u8ffd\u52a0",children:"\u30ab\u30b9\u30bf\u30e0 testValues \u306e\u8ffd\u52a0"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"withTestValues()"})," \u62e1\u5f35\u95a2\u6570\u3092\u4f7f\u3063\u3066\u3001\u8ffd\u52a0\u306e\u30c6\u30b9\u30c8\u5024\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-kotlin",children:'@Preview\n@Composable\nfun MyPreview() = PreviewLab {\n    val count = fieldValue {\n        IntField("Count", 0)\n            .withTestValues(-1, 0, 1, Int.MAX_VALUE, Int.MIN_VALUE)\n    }\n    // ...\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"\u4f9d\u5b58\u95a2\u4fc2",children:"\u4f9d\u5b58\u95a2\u4fc2"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-kotlin",children:'// build.gradle.kts\ndependencies {\n    testImplementation("io.kotest:kotest-property:5.9.1")\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"\u95a2\u9023\u30ea\u30f3\u30af",children:"\u95a2\u9023\u30ea\u30f3\u30af"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://kotest.io/docs/proptest/property-based-testing.html",children:"kotest-property \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://github.com/TBSten/compose-preview-lab/issues/75",children:"GitHub Issue #75"})}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>d,x:()=>r});var l=s(6540);const n={},i=l.createContext(n);function d(e){const t=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),l.createElement(i.Provider,{value:t},e.children)}}}]);